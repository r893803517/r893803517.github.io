### 区分进程和线程

进程是系统资源分配的最小单位，系统为每个进程分配一块内存，一个应用程序可以包含多个进程，进程之间可以通信，但是开销较大

一个进程可以包含多个线程，进程所在的内存空间对于里面的线程来说都是共享的，但是同一时间下只允许一个线程操作共享内存，防止多个线程同时读写某一块内存区域


### 浏览器多进程

通常每新建一个tab页，浏览器就会新开启一个新的渲染进程

浏览器大致包含四种进程：

1. 主进程（browser）

    也被称为Browser进程，是浏览器的主控进程，只有一个，负责整体的调控、tab页面的

2. GPU进程（GPU）

    图形处理器，负责3D图形绘制，只有一个

3. 渲染进程（render）

    主要负责页面渲染相关工作，可以存在多个

4. 插件进程

    每一个插件都会创建一个插件进程

 ### 浏览器中的渲染进程

 上述四个进程中，与前端开发关联比较大的就是渲染进程和GPU线程了，像页面渲染、脚本执行、事件循环、接口请求等都在渲染线程中，而css3中使用的硬件加速则是在GPU进程中实现

 > 浏览器内核原本指渲染引擎和JS引擎，由来由于JS引擎越来越独立，浏览器内核就倾向于单指渲染引擎

### 渲染进程

主要负责页面解析、JS执行、事件循环处理等操作，包含五大常驻线程

1. GUI渲染线程：

    GUI（图形用户界面） 渲染进程负责将HTML解析成DOM tree，将CSS解析成CSSOM tree，然后将二者整合生成Render tree，进行布局（Flow Layout）和绘图（Paint）

    当Render Tree中部分或全部元素的尺寸、结构、或某些属性发生改变时、触发浏览器回流（Reflow）

    当页面中元素样式的改变不影响它在文档流中的位置时（例如： color、background-color、visibility等等）触发浏览器重绘

    GUI渲染进程和JS引擎线程是互斥的，二者不会同时发生

2. JS引擎线程：
   
   负责解析、执行JS脚本代码

   在空闲时执行任务队列中进来的异步任务

   每个tab页面中只有一个JS引擎线程， 而且与GUI线程互斥，如果JS引擎线程在修改DOM的时候渲染线程执行渲染页面，会导致显示错误

3. 事件触发线程：

    浏览器为JS引擎开辟的助手，用于控制事件循环


4. 定时器线程：
5. HTTP请求线程：


### 如何实现多个渲染进程（即浏览器内不同标签页）间的通信

1. 通过websocket，以服务器为中介
2. 通过localstorage
3. 通过PostMessage
4. 通过sharewroker，共享线程

